<!DOCTYPE html>
<html>
  <head>
    <title>Vuecrest Homes Association</title>
    <!-- Change These -->
    <meta name="viewport" content="initial-zoom=17,initial-lat=47.6191906,initial-long=-122.2116091,property-data=homedata.json">
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- JS in head due to async defer map load in body -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDa23K1C27CaCNxbtjtxB8hxXUlMxoepws"></script>
    <script src="utils.js"></script>
    <script src="infobox.js"></script>
    <script src="mapsetup.js"></script>
    <script>
      var map;
      var propdataobj = [];
      var propertylables;
      var balence_due_properties;
      var compliance_properties;
      var construction_properties;
      var initialzoom = parseFloat(getContentValue("initial-zoom"));
      var initiallat = parseFloat(getContentValue("initial-lat"));
      var initiallong = parseFloat(getContentValue("initial-long"));
      var propertydatafile = getContentValue("property-data");

     /***************************
     Author: ericpassmore
     Purpose: render the maps
     Inputs: API key, lat center pt, long cetner poitn, zoom level
     ***************************/
     function initMap() {
       map = new google.maps.Map(document.getElementById('map'), {
         center: {lat: initiallat, lng: initiallong},
         zoom: initialzoom
       });

     /*****
     Author: ericpassmore
     Purpose: shows an infowindow when you click on random part of map
     Nested inside initMap()
     ******/
       var infowindow = ""; 
       google.maps.event.addListener(map, 'click', function( event ){

         if ( infowindow ) { infowindow.close(); }

         infowindow = new google.maps.InfoWindow({
            content: "Latitude: "+event.latLng.lat()+" "+", longitude: "+event.latLng.lng(),
            position: {lat: event.latLng.lat() , lng: event.latLng.lng() }
         });
         infowindow.open(map);
       });

       // CREATE BOXES around property and add LABLES with housenumber, etc
       renderHomes();
       // Create the DIV to hold the control and call the left controll constructor
       // passing in this DIV.
       var leftControlDiv = document.createElement('div');
       var leftControl = new LeftControl(leftControlDiv);

       leftControlDiv.index = 1;
       map.controls[google.maps.ControlPosition.LEFT_CENTER].push(leftControlDiv, map);
     }

    </script>
  </head>
  <body onload="initMap()">
    <div id="map"></div>
  </body>
</html>
